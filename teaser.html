<!doctype html>
<html>
    <head>
        <title>A Declarative Rendering Model for Multiclass Density Maps</title>
<style>
bodyno {
  background-image:url('Baboon.png');
  background-repeat:repeat;
}
canvas {
  border: 1px solid grey;
}
.example {
  font-weight: bold;
  float:left;
  margin:5px;
}
.clearBoth { clear:both; }

</style>        
    </head>
    <body>
        <script src="https://d3js.org/d3-dsv.v1.min.js"></script>
        <script src="https://d3js.org/d3-fetch.v1.min.js"></script>
        <script src="dist/bundle.js" type="text/javascript"></script>
<script>
var testMain = new MCS.TestMain(), prefix = "specs/";
var configuration, interpreter, canvasCount=0;

function render(desc, json, do_break) {
    var body = document.getElementsByTagName('body')[0],
        div = document.createElement("div"),
        canvas = document.createElement("canvas"),
        svg = document.createElementNS("http://www.w3.org/2000/svg", "svg"),
        id = "canvas"+(++canvasCount);
    
    div.classList.add("example");
    canvas.id = id;
    //svg.id = id + '-legend';
    //div.appendChild(document.createTextNode(desc));
    //div.appendChild(document.createElement("br"));
    div.appendChild(canvas);
    //div.appendChild(svg);


  body.appendChild(div);
  if (do_break) {
      var br = document.createElement("br");
      br.classList.add('clearBoth');
      body.appendChild(br);
  }
  var conf = testMain.create_configuration(json);
  conf.load('data/').then(function(conf) {
      interp = testMain.create_interp(conf);
      console.log('interp w='+conf.width+' h='+conf.height);
      interp.setup(id);
      interpreter = interp;
      interp.interpret();
      interp.render(id);
      //interp.renderLegend(id+'-legend');
  });
}

render('Linear Color Scale Small Multiples',
       {
           "description": "multivariate normal data",
           "data": {"url": "mn_data.json"},
           "compose": {
               "mix": "separate" //, select: 1
           },
           "rescale": {
               "type": "linear"
           }
       });


render('Linear Color Scale blended',
       {
           "description": "multivariate normal data",
           "data": {"url": "mn_data.json"},
           "compose": {
               "mix": "mean",
               "mixing": "additive"
           }
       });

render('Linear Color Scale Max',
       {
           "description": "multivariate normal data",
           "data": {"url": "mn_data.json"},
           "compose": {
               "mix": "max",
               "mixing": "additive"
           },
           "rescale": {
               "type": "linear"
           }
       });

// render('Linear Color Scale mean equalized',
//        {
//            "description": "multivariate normal data",
//            "data": {"url": "mn_data.json"},
//            "compose": {
//                "mix": "mean",
//                "mixing": "additive"
//            },
//            "rescale": {
//                "type": "equidepth"
//            }
//        }, true);

render('Contour lines',
       {
           "description": "multivariate normal data",
           "data": {"url": "mn_data.json"},
           "compose": {
               "mix": "none"
           },
           "contour": { "stroke": 4}
       });

render('Square Weaving',
       {
           "description": "multivariate normal data",
           "data": {"url": "mn_data.json"},
           "compose": {
               "mix": "weavingsquare",
               "size": 8
           },
           "rescale": {
               "type": "linear"
           }
       });

render('Linear Color Scale hex',
       {
           "description": "multivariate normal data",
           "data": {"url": "mn_data.json"},
           "compose": {
               "mix": "weavinghex",
               "size": 8
           },
           "rescale": {
               "type": "linear"
           }
       });

// render('Linear Color Scale triangles',
//        {
//            "description": "multivariate normal data",
//            "data": {"url": "mn_data.json"},
//            "compose": {
//                "mix": "weavingtri",
//                "size": 8
//            },
//            "rescale": {
//                "type": "linear"
//            }
//        });


render('Random Weaving',
       {
           "description": "multivariate normal data",
           "data": {"url": "mn_data.json"},
           "compose": {
               "mix": "weavingrandom",
               "size": 6
           },
           "rescale": {
               "type": "linear"
           }
       }, true);

render('Voronoi Tiling Mean',
       {
           "description": "multivariate normal data",
           "data": {"url": "mn_data.json"},
           "rebin": {
               "type": "voronoi",
               "size": 32,
               "stroke": "white"
           },
           "compose": {
               "mix": "max"
           }
       });

render('Voronoi Tiling',
       {
           "description": "multivariate normal data",
           "data": {"url": "mn_data.json"},
           "rebin": {
               "type": "voronoi",
               "size": 32,
               "stroke": "white"
           },
           "compose": {
               "mix": "weavingsquare",
               "size": 6
           }
       });

render('Voronoi Tiling + Hatching',
       {
           "description": "multivariate normal data",
           "data": {"url": "mn_data.json"},
           "rebin": {
               "type": "voronoi",
               "size": 32,
               "stroke": "white"
           },
           "compose": {
               "mix": "propline",
               "size": 4,
               "widthprop":"percent",
               "colprop":true
           }
       });

render('Voronoi Tiling + (Glyph - bars)',
       {
           "description": "multivariate normal data",
           "data": {"url": "mn_data.json"},
           "rebin": {
               "type": "voronoi",
               "size": 32,
               "stroke": "grey"
           },
           "compose": {
               "mix": "glyph",
               "glyphSpec": {
                   "template": "bars",
                   "width": 20,
                   "height": 20
               }
           }
          });

render('Voronoi Tiling + (Glyph - circles)',
       {
           "description": "multivariate normal data",
           "data": {"url": "mn_data.json"},
           "rebin": {
               "type": "voronoi",
               "size": 32,
               "stroke": "grey"
           },
           "compose": {
                "mix": "glyph",
                "glyphSpec": {
                    "template": "punchcard",
                    "width": 20,
                    "height": 20,
                    "factor": 4
                }
            }
          });

render('Voronoi Tiling + Tilted Hatching',
       {
           "description": "multivariate normal data",
           "data": {"url": "mn_data.json"},
           "rebin": {
               "type": "voronoi",
               "size": 32,
               "stroke": "white"
           },
           "compose": {
               "mix": "hatching",
               "size": 2,
               "widthprop":1.0,
               "colprop":false
           }
       });

render('Voronoi Tiling + Tilted Hatching + contours',
       {
           "description": "multivariate normal data",
           "data": {"url": "mn_data.json"},
           "rebin": {
               "type": "voronoi",
               "size": 32,
               "stroke": "white"
           },
           "compose": {
               "mix": "weavingsquare",
               "size": 6
           },
           "contour": { "stroke": 4}
       });

</script>
    </body>
</html>
